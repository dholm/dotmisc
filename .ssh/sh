ssh_config_path="$HOME/.ssh/config"

function ssh_configure()
{
    local update_config=
    local config_path="$HOME/.ssh/conf"
    if [ ${config_path} -nt ${ssh_config_path} ]
    then
        debug "Generic SSH config changed."
        update_config=true
    fi

    local local_config_path="$HOME/.ssh/conf.local"
    if [ -r ${local_config_path} ] && \
        [ ${local_config_path} -nt ${ssh_config_path} ]
    then
        debug "Local SSH config changed."
        update_config=true
    fi

    if [ ${update_config} ]
    then
        debug "Updating SSH configuration.."
        cat ${config_path} ${local_config_path} 1> ${ssh_config_path} 2>/dev/null
    fi

    return 0
}

function _ssh_setup
{
    alias_add ssh 'ssh_configure; ssh'
}
eval_safe _ssh_setup

# Local Variables:
# mode: shell-script
# End:
